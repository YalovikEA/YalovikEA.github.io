(function(){"use strict";try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode("#promo-widget{position:fixed;right:10px;bottom:10px;z-index:1000;padding:10px;font-family:Arial,sans-serif;font-size:14px;color:#fff;background:#333;border-radius:5px;box-shadow:0 0 10px #00000080}.promo-code{text-decoration:underline;cursor:pointer}.tooltip{position:absolute;display:none;padding:5px;font-size:12px;color:#000;background:#fff;border-radius:3px}.tooltip-trigger{margin-left:5px;cursor:help}.close-widget{margin-left:10px;padding:3px 7px;color:#fff;background:red;border:none;border-radius:3px;cursor:pointer}")),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
(function(){"use strict";class s{constructor(t){if(!(t!=null&&t.baseUrl))throw new Error("baseUrl is required");this.baseUrl=t.baseUrl,this.debug=t.debug||!1,this.authTokenFactory=t.authTokenFactory,this.debug&&this.useDebugLogs()}async getFirstActivePromotion(){return await this.callApi({url:"/promotions?state=active",method:"GET"})}async getPromotionByCode(t){return await this.callApi({url:`/promotions?code=${t}`,method:"GET"})}addRandomToUrl(t){return t.indexOf("?")===-1?t+"?rnd="+Math.random().toString():t+"&rnd="+Math.random().toString()}async callApi(t){const o=t.method??"GET",a=o==="GET"?this.addRandomToUrl(t.url):t.url;try{const e=await fetch(this.baseUrl+a,{method:o,headers:{"Content-Type":"application/json",...await this.getAuthHeader()},body:o==="GET"?null:JSON.stringify(t.requestData)});if(e.status>=200&&e.status<400)return await e.json();throw new Error(`API call failed with status: ${e.status}`)}catch(e){throw console.error("Failed to call API",e),e}}async getAuthHeader(){if(this.authTokenFactory){const t=await this.authTokenFactory();if(t)return{Authorization:`Bearer ${t}`}}return{}}useDebugLogs(){const t=fetch;window.fetch=async(...o)=>{const[a,e]=o;console.info("Calling API",a,e==null?void 0:e.body);const n=await t(...o);return console.info("Got response from API",a,await n.clone().json()),n}}}(async function(){try{const r=new s({baseUrl:"https://api.fstfn.com/",debug:!0}),t=await(r==null?void 0:r.getFirstActivePromotion()),{title:o,offer:a,promocode:e}=await t,n=document.createElement("div");n.id="promo-widget",n.innerHTML=`
            <span class="promo-text">${o}</span>
            <strong id="promo-code" class="promo-code">${e}</strong>
            <span id="tooltip" class="tooltip">${a}</span>
            <span id="tooltip-trigger" class="tooltip-trigger">❓</span>
            <button id="close-widget" class="close-widget">×</button>
        `,document.body.appendChild(n),document.getElementById("promo-code").addEventListener("click",()=>{navigator.clipboard.writeText(e).then(()=>{alert("Промокод скопирован!")})}),document.getElementById("tooltip-trigger").addEventListener("mouseenter",()=>{document.getElementById("tooltip").style.display="block"}),document.getElementById("tooltip-trigger").addEventListener("mouseleave",()=>{document.getElementById("tooltip").style.display="none"}),document.getElementById("close-widget").addEventListener("click",()=>{n.style.display="none"})}catch(r){console.error("Ошибка загрузки данных для виджета:",r)}})()})();
